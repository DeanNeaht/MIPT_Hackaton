# Проект: Анализ сайта «СберАвтоподписка» и прогнозирование целевых действий

> **Учебный проект МФТИ Хакатона**  
> Работа выполнена командой 2

## 1. Понимание задачи и цель проекта

### Цель проекта
Разработка модели машинного обучения, которая предсказывает вероятность совершения целевого действия пользователем на сайте «СберАвтоподписка». Целевое действие — это оформление заявки, заказ звонка и другие ключевые активности.

### Практическая значимость
Реализованная модель позволит компании:
- Оценивать эффективность различных каналов привлечения трафика
- Оптимизировать рекламные кампании под наиболее конверсионные сегменты
- Улучшать UX сайта, основываясь на анализе поведения пользователей
- Повысить общую конверсию и эффективность маркетинговых инвестиций

## 2. Анализ исходных данных

В рамках проекта был проведен комплексный анализ логов пользовательских действий на сайте:

- **Исследованы и обработаны пропуски** в ключевых атрибутах пользовательских сессий
- **Проанализированы распределения** важных признаков (utm-метки, устройства, геолокация)
- **Выявлены корреляции** между характеристиками пользователей и вероятностью совершения целевого действия
- **Обнаружены закономерности** в поведении пользователей в зависимости от:
  - Источника трафика (органический vs платный)
  - Устройства (мобильные vs десктоп)
  - Времени посещения
  - Географии

Подробный анализ представлен в файле `draft_v1.ipynb` с визуализациями и интерпретациями.

## 3. Проектирование решения

Для решения задачи реализован следующий подход:

### Архитектура решения
1. **Подготовка данных**:
   - Обработка категориальных признаков с помощью One-Hot Encoding
   - Работа с временными характеристиками (извлечение часа посещения)
   - Сегментация визитов пользователей (было ли совершено целевое действие)

2. **Модель машинного обучения**:
   - Выбрана и обучена модель на базе LogisticRegression и CatBoost
   - Проведена оптимизация гиперпараметров
   - Достигнута метрика ROC-AUC ≈ 0.65

3. **API-сервис**:
   - Разработан REST API на FastAPI
   - Реализована полная предобработка входящих данных
   - Обеспечено время ответа < 3 секунды

## 4. Реализация прототипа

### Компоненты решения
1. **Аналитический модуль** (`draft_v1.ipynb`):
   - Предобработка и анализ данных
   - Разработка и обучение модели
   - Сохранение модели и энкодеров

2. **Проверка продуктовых гипотез** (`Продуктовые гипотезы.ipynb`):
   - Исследование влияния операционной системы на конверсию

3. **API для использования модели** (`app.py`):
   - Реализован полный цикл обработки запросов
   - Корректная предобработка входящих данных
   - Возврат вероятности и класса целевого действия

## 5. Установка и запуск

### Зависимости
```bash
pip install -r requirements.txt
```

### Запуск API сервера
```bash
python app.py
```

Сервер будет доступен по адресу http://localhost:8000

### Документация API
После запуска сервера документация доступна по адресам:
- http://localhost:8000/docs - Swagger UI
- http://localhost:8000/redoc - ReDoc

### Тестирование API
```bash
python3 test_api.py
```

## 6. Выводы и рекомендации

В результате проведенного анализа выявлены ключевые факторы, влияющие на конверсию:

1. **Источники трафика**: наиболее конверсионными являются определенные рекламные кампании
2. **Устройства**: пользователи десктопа показывают более высокую конверсию
3. **Время посещения**: вечерние часы демонстрируют повышенную активность пользователей

Рекомендации для бизнеса:
- Перераспределить рекламный бюджет в пользу наиболее эффективных каналов
- Оптимизировать мобильную версию сайта для повышения конверсии
